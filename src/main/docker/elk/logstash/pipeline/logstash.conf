input {
	 kafka {
		id => "insight"
		bootstrap_servers => "kafka:9092"
        auto_offset_reset => "earliest"
        decorate_events => "true"
        topics => ["topic"]
	}
}
filter {
  grok {
     match => [ "message", "%{DATA:type},%{GREEDYDATA:objetsObserves}" ]
  }
}
output {
	stdout {	}
	http {
        http_method => "post"
        url => "http://insight-app:8080/api/observed-data"
        content_type => "application/json"
        headers => ["Authorization", "Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhZG1pbiIsImF1dGgiOiJST0xFX0FETUlOLFJPTEVfVVNFUiIsImV4cCI6MTU0MTgzNzU5NX0.hOwTRAeqD0t02e8JQrKHz4fWOTfv7OqOZfQOlaUJW1tStJRRJC1TX7h-eaFQE_6eAHidVgq1nTGkGExeVLffOQ"]
        format => "json"
	}
}
